#include "services_dune.fcl"
#include "hitfindermodules_dune.fcl"
#include "TpcDAQToOffline.fcl"
#include "SSPToOffline.fcl"

process_name: NearlineAna

services:
{
  TimeTracker:       {}
  SimpleMemoryCheck:     { ignoreTotal: 1 } # default is one
  RandomNumberGenerator: {} #ART native random number generator
  FileCatalogMetadata:  @local::art_file_catalog_mc
  TFileService: { fileName: "nearlineana_hists.root" }
  user:         @local::dune35t_services
}

source:
{
  module_type: RootInput
}

physics:
{
    producers:
    {
      rns:                { module_type: RandomNumberSaver }
      tpcdaqtooffline:    @local::tpc_daq_to_offline
      sspdaqtooffline:    @local::ssp_to_offline
      fasthit:            @local::dune35t_fasthitfinder      
    }

    analyzers:
    {
        nearlineana:{
          module_type: NearlineAna
        }
    }

    daqtooffline: [ rns, tpcdaqtooffline, sspdaqtooffline, fasthit ]
    nearline:     [ nearlineana ]
    trigger_paths:[ daqtooffline ]
    end_paths:    [ nearline ]  

}

physics.analyzers.nearlineana.NoiseSpectrumChannels: [ 0, 1164]
physics.analyzers.nearlineana.RawDigitsTag: "tpcdaqtooffline:offline"

physics.producers.fasthit.DigitModuleLabel: "tpcdaqtooffline:offline"
